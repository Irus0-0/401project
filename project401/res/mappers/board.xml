<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">
	

	<insert id="insertBoard" parameterType="board.vo.BoardVO">
	
		insert into jdbc_board (board_no, board_title, board_writer, board_date, board_content)
			 values (board_seq.nextVal, #{boardTitle}, #{boardWriter}, sysdate, #{boardContent})

	</insert>


	<update id="updateBoard" parameterType="board.vo.BoardVO">
	
		update jdbc_board
		   set board_title = #{boardTitle},
			   board_content = #{boardContent}
	     where board_no = #{boardNo}
	
	</update>


	<delete id="deleteBoard" parameterType="String">   <!-- java.lang.String 이지만 자주 쓰는 타입은 자동으로 인식함 -->
	
		delete from jdbc_board where board_no = #{aaa}      <!-- 어차피 String 값 하나만 날라오기 때문에 {} 안의 속성이름은 상관없음, 안 적으면 예외발생 -->
	
	</delete>
	
	
	<select id="selectAllBoard" resultType="board.vo.BoardVO">
		
	    <!-- select * from mymember 로 적으면 예외 발생-->
		
		select board_no as boardNo,          <!-- mv.setMem_id() 라는 메소드는 존재하지 않음 => myBatis가 유추할수 있도록 Alias를 적어줌 -->
			   board_title as boardTitle,
			   board_writer as boardWriter,
			   board_date as boardDate,
			   board_content as boardContent
		  from jdbc_board
		
	</select>
	
	
	<select id="checkBoard" resultType="int">
	
		select count(*) as cnt from jdbc_board where board_no = #{boardNo}
		
	</select>
	
	
	<resultMap type="board.vo.BoardVO" id="boardMap">
		<result column="board_no" property="boardNo" />
		<result column="board_title" property="boardTitle" />
		<result column="board_writer" property="boardWriter" />
		<result column="board_date" property="boardDate" />
		<result column="board_content" property="boardContent" />
	</resultMap>
	<!-- 매핑 정보 제공, 이외 기능도 많음-->
	
	<select id="searchBoard" resultMap="boardMap">
	
		select *
		  from jdbc_board
		 where 1=1
	 <if test="boardNo != null and boardNo != ''">
	 		and board_no = #{boardNo}
	 </if>
	 <if test="boardTitle != null and boardTitle != ''">
	 		and board_title = #{boardTitle}
	 </if>
	 <if test="boardWriter != null and boardWriter != ''">
	 		and board_writer = #{boardWriter}
	 </if>
	 <if test="boardDate != null and boardDate != ''">
	 		and board_date like '%' || #{boardDate} || '%'
	 </if>
	 <if test="boardContent != null and boardContent != ''">
	 		and board_content like '%' || #{boardContent} || '%'
	 </if>

	</select>



</mapper>